<!DOCTYPE html>
<html>

<head>
    <base href="/openstreetmap">
    <title>Emrit OSM</title>
    <link rel="icon" href="https://emrit.comorin.co/openstreetmap/assets/markerLogo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-ua-compatible" content="IE-edge">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <style>
        html,
        body {
            height: 100%;
            padding: 0;
            margin: 0;
        }

        #map {
            /* configure the size of the map */
            width: 100%;
            height: 100%;
        }

        .modal.custom .modal-dialog {
            position: fixed;
            bottom: 0;
            margin: auto;
            right: 25%;
            left: 25%;
        }

        .bottomBox {
            background: rgb(37, 37, 37);
            background: linear-gradient(90deg, rgb(37 37 37 / 25%) 0%, rgb(37 37 37 / 58%) 0%, rgba(88, 88, 99, 1) 47%, rgba(37, 37, 37, 1) 100%);
            padding: 15px;
            margin: 10px;
            border-radius: 10px;
        }

        .bottomdiv {
            position: fixed;
            bottom: 0;
            z-index: 1050;
            right: 0;
            border-radius: 10px;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#"><img src="https://emrit.comorin.co/images/emrit_logo.png" width="118px"></a>
    </nav>
    <div id="map"></div>
    <!-- Modal Dialog Start -->
    <div id="mymodal" class="modal fade custom" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header text-center" style="
                background: #454a50;
                color: #22d690;
            ">
                    <h4 class="modal-title">Coolspot details: <span id="demo"></span>
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p><strong>Accout ID: </strong><br><span
                            style="word-wrap: break-word">143ZDp7mCcgurqGZW4ppK7P87XC2Jw1NEZwVuN3UTGfTmxX9zWL</span></p>
                    <p><strong>Total HNT: </strong>1,378.32</p>
                    <p><strong>Name: </strong>shiny-velvet-yak</p>
                    <p><strong>Location: </strong> Tucson, AZ, United States</p>
                    <p><strong>Score: </strong>0.01</p>
                    <p><strong>Activity Log: </strong><br> with transactions identified by hashes like:
                        VAG15EvEwsulxZNBNnBSpdMJlofouQZozaa9zRmuOtY, block height, data_credits, poc_challengers,
                        poc_witnesses, poc_challengees, and consensus</p>
                    <p></p>
                    <p></p>
                    <p></p>
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <div id="mymodal2" class="modal fade custom" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title">Hotspot details: <span id="demo2"></span>
                    </h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p><strong>Accout ID: </strong><br><span
                            style="word-wrap: break-word">143ZDp7mCcgurqGZW4ppK7P87XC2Jw1NEZwVuN3UTGfTmxX9zWL</span></p>
                    <p><strong>Total HNT: </strong>1,378.32</p>
                    <p><strong>Name: </strong>shiny-velvet-yak</p>
                    <p><strong>Location: </strong> Tucson, AZ, United States</p>
                    <p><strong>Score: </strong>0.01</p>
                    <p><strong>Activity Log: </strong><br> with transactions identified by hashes like:
                        VAG15EvEwsulxZNBNnBSpdMJlofouQZozaa9zRmuOtY, block height, data_credits, poc_challengers,
                        poc_witnesses, poc_challengees, and consensus</p>
                    <p></p>
                    <p></p>
                    <p></p>
                    <p></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Dialog End -->
    <div class="bottomdiv">
        <div class="checkdata" style="background-color: white; padding: 10px; margin: 10px;border-radius: 10px;">
            <input type="checkbox" id="vehicle1" name="vehicle1" value="Bike" onchange="stickyheaddsadaer(this)">
            <label for="vehicle1"> Display Range</label><br>
        </div>
        <div class="bottomBox">
            <div class="col-lg-12 text-center">
                <img src="https://emrit.comorin.co/openstreetmap/assets/markerLogo.png" width="43px">
            </div>
            <div class="col-lg-12 text-center pt-2">
                <h4 class="mb-0" style="color: white;" id="hotspots"></h4>
            </div>
        </div>
    </div>
    <script>
        var greenIcon = L.icon({
            iconUrl: 'https://emrit.comorin.co/openstreetmap/assets/markerLogo.png',
            // shadowUrl: 'https://emrit.comorin.co/openstreetmap/assets/markerLogo.png',
            iconSize: [17, 17], // size of the icon
            // shadowSize: [17, 17], // size of the shadow
            iconAnchor: [17, 17], // point of the icon which will correspond to marker's location
            // shadowAnchor: [4, 62],  // the same for the shadow
            popupAnchor: [-3, -76] // point from which the popup should open relative to the iconAnchor
        });
        var locations = [
            {
                "hotspot_name": "Able Laurel Giraffe",
                "hotspot_wallet": "11yANjmS1tvXTEACK48jTup9aerGVFsEn3hCHkrjYdh6tFLXPsL",
                "owner_wallet": "13YuCz3mZ55HZ6hJJvQHCZXGgE8ooe2CSvbtSHQR3m5vZ1EVCNZ",
                "client_wallet": null,
                "h3_location_code": "8c44c13215ad1ff",
                "open_street_maps_id": "r119557",
                "lat": "33.8464083808",
                "long": "-84.3720086817",
                "address": "Tower Place Dr NE",
                "city": "Atlanta",
                "state_region": "GA",
                "country_short": "US",
                "country": "United States of America",
                "zip": "30326",
                "population": 486290,
                "score": "0.2500000000000",
                "status": "offline",
                "emrit_owned": "true"
            },
            {
                "hotspot_name": "Able Mandarin Hornet",
                "hotspot_wallet": "112iWP5YSEZxfV6wyHXhdAKTLuZXQm2ehym1FRLVqowiFoXnDEd6",
                "owner_wallet": "13YuCz3mZ55HZ6hJJvQHCZXGgE8ooe2CSvbtSHQR3m5vZ1EVCNZ",
                "client_wallet": null,
                "h3_location_code": "8c44c1a9d563dff",
                "open_street_maps_id": "r119557",
                "lat": "33.7728978434",
                "long": "-84.3524924869",
                "address": "667 N Highland Ave NE",
                "city": "Atlanta",
                "state_region": "GA",
                "country_short": "US",
                "country": "United States of America",
                "zip": "30306",
                "population": 486290,
                "score": "0.2500000000000",
                "status": "offline",
                "emrit_owned": "true"
            },
            {
                "hotspot_name": "Abundant Coral Dragon",
                "hotspot_wallet": "112LmQuYNwcGHNXB6orwcjPDmbv88MCWSj1MGwfBEqu3F8BpQDry",
                "owner_wallet": "13YuCz3mZ55HZ6hJJvQHCZXGgE8ooe2CSvbtSHQR3m5vZ1EVCNZ",
                "client_wallet": null,
                "h3_location_code": "8c44c13316dd7ff",
                "open_street_maps_id": "r119557",
                "lat": "33.8546577628",
                "long": "-84.3100896042",
                "address": "1922 Gregory Run NE",
                "city": "Atlanta",
                "state_region": "GA",
                "country_short": "US",
                "country": "United States of America",
                "zip": "30345-2306",
                "population": 486290,
                "score": "0.6832885742188",
                "status": "online",
                "emrit_owned": "true"
            },
            {
                "hotspot_name": "Abundant Garnet Millipede",
                "hotspot_wallet": "1121X3K1sBSeFVmYkPgzfUzNPE7wgLmrdg2AMG84PsNGdktV1be1",
                "owner_wallet": "14DN6yWS2YLaXQauJMHZCXMBv4hCTRcoHBVmaNmX93LyTxqvWS2",
                "client_wallet": null,
                "h3_location_code": "8c44c1a880ea3ff",
                "open_street_maps_id": "r119557",
                "lat": "33.7893365452",
                "long": "-84.3999266888",
                "address": "395 16th St NW",
                "city": "Atlanta",
                "state_region": "GA",
                "country_short": "US",
                "country": "United States of America",
                "zip": "30363-1011",
                "population": 486290,
                "score": "0.8898162841797",
                "status": "online",
                "emrit_owned": "true"
            },
            {
                "hotspot_name": "Abundant Mint Cormorant",
                "hotspot_wallet": "11pUz71Jb8UAsY7sXkd2UNEaFCj4w4cgAdrEeqJf4cFRYBzVT5r",
                "owner_wallet": "13YuCz3mZ55HZ6hJJvQHCZXGgE8ooe2CSvbtSHQR3m5vZ1EVCNZ",
                "client_wallet": null,
                "h3_location_code": "8c44c13226ae1ff",
                "open_street_maps_id": "r119557",
                "lat": "33.8459886273",
                "long": "-84.3327256636",
                "address": "1329 Doublegate Dr NE",
                "city": "Atlanta",
                "state_region": "GA",
                "country_short": "US",
                "country": "United States of America",
                "zip": "30319",
                "population": 486290,
                "score": "0.0161743164063",
                "status": "online",
                "emrit_owned": "true"
            },
            {
        "hotspot_name": "Sneaky Indigo Goblin",
        "hotspot_wallet": "1125DVEquYX7dadcDz1t4s4424WxDyWUe6x3YKKhFYdGKnhgx2qV",
        "owner_wallet": "13uUPVDBGfiBaCFW5iHQeNdHByRnCuzLUB5gmx35nxNqqra1d5H",
        "client_wallet": null,
        "h3_location_code": "8c489e36468dbff",
        "open_street_maps_id": "",
        "lat": "",
        "long": "",
        "address": null,
        "city": null,
        "state_region": null,
        "country_short": null,
        "country": null,
        "zip": null,
        "population": null,
        "score": null,
        "status": null,
        "emrit_owned": "false"
    },
    {
        "hotspot_name": "Great Cherry Poodle",
        "hotspot_wallet": "114VWEMDtgD6qFqA3iS71xpGfLN1Dd1uZXjPpjMH5xX3cX8arYe",
        "owner_wallet": "14jPnW8vEKR4uDC7TPTmBZ2Y2CqdD4mANZPMvXfrNHPPDeieDy3",
        "client_wallet": null,
        "h3_location_code": "8c26640acdb6bff",
        "open_street_maps_id": "r127191",
        "lat": "41.5512533050",
        "long": "-87.4542947301",
        "address": "3054 Hess Dr",
        "city": "Highland",
        "state_region": "IN",
        "country_short": "US",
        "country": "United States of America",
        "zip": "46322-2131",
        "population": 22961,
        "score": null,
        "status": null,
        "emrit_owned": "false"
    },
    {
        "hotspot_name": "Flat Hazel Snail",
        "hotspot_wallet": "11CjhLTAQWHUjZvmQke49ZYr8k6nge2rHmL1TSLzsmfHjpXV64C",
        "owner_wallet": "13JyFksMcfyMTpycMy1XStssPWcQJut61n68sMUhG1cJQBmwUWi",
        "client_wallet": null,
        "h3_location_code": "8c2aa8c7411ebff",
        "open_street_maps_id": "n671113",
        "lat": "39.2855469550",
        "long": "-76.5779330330",
        "address": "564 S Belnord Ave",
        "city": "Baltimore",
        "state_region": "MD",
        "country_short": "US",
        "country": "United States of America",
        "zip": "21224-3801",
        "population": 621342,
        "score": null,
        "status": null,
        "emrit_owned": "false"
    },
    {
        "hotspot_name": "Clean Nylon Okapi",
        "hotspot_wallet": "11aS1fM9HHVHzRgjVtcP55559X8pMnkCUdSttfZUohqH84sNQpM",
        "owner_wallet": "13jL4pTLq4JQBwDoH1ZBX3VPchmeTZxQSGi4cnyXXuzPPoKxcd5",
        "client_wallet": null,
        "h3_location_code": "8c489e3444551ff",
        "open_street_maps_id": "r113314",
        "lat": "30.2555763563",
        "long": "-97.7623357837",
        "address": "1132 S Lamar Blvd",
        "city": "Austin",
        "state_region": "TX",
        "country_short": "US",
        "country": "United States of America",
        "zip": "78704-2300",
        "population": 790390,
        "score": null,
        "status": null,
        "emrit_owned": "true"
    },
    {
        "hotspot_name": "Wobbly Red Fish",
        "hotspot_wallet": "11267NoGnJi3KvJL1KnDDFhHiPvtmGcx1bhgi4ecwVMJsJgFBa54",
        "owner_wallet": "13pvRETyRgnyYWcVTBwwmRjCmVMwpvca3264ZLFkwRmHJGq5t62",
        "client_wallet": null,
        "h3_location_code": "8c2a100dd70b5ff",
        "open_street_maps_id": "r9691750",
        "lat": "40.6842367887",
        "long": "-73.9171223327",
        "address": "729 MacDonough St",
        "city": "Brooklyn",
        "state_region": "NY",
        "country_short": "US",
        "country": "United States of America",
        "zip": "11233-1609",
        "population": 2532645,
        "score": null,
        "status": null,
        "emrit_owned": "false"
    },
    {
        "hotspot_name": "Acrobatic Walnut Camel",
        "hotspot_wallet": "11UnH7Bh5X3Pus6KzbzUPKFd2vHR52BE2FSRMDguYJjZMRaUDMR",
        "owner_wallet": "14UGKeuJCq6hnuoFxW8Q9548XtDC8r6rXvjtnjnEn2kgEpvhkyt",
        "client_wallet": null,
        "h3_location_code": "8c2836005b95dff",
        "open_street_maps_id": "r111729",
        "lat": "37.7131655904",
        "long": "-120.9896202720",
        "address": "449 Claribel Rd",
        "city": "Modesto",
        "state_region": "CA",
        "country_short": "US",
        "country": "United States of America",
        "zip": "95356-9613",
        "population": 211266,
        "score": null,
        "status": null,
        "emrit_owned": "false"
    },
    {
        "hotspot_name": "Young Tangelo Seagull",
        "hotspot_wallet": "11f1B9tdcWa215wT7SCrefYbbRQSAFb4i4S34Lr2roiNG1K4WzH",
        "owner_wallet": "13cxvd8mFDbyQVpLN2Dmk7r8cCRprbywUaw5XQ1e6uRviuTweVg",
        "client_wallet": null,
        "h3_location_code": "8c28de8d8d23dff",
        "open_street_maps_id": "r1852574",
        "lat": "49.2793656213",
        "long": "-123.1176586922",
        "address": "853 Homer St",
        "city": "Vancouver",
        "state_region": "BC",
        "country_short": "CA",
        "country": "Canada",
        "zip": "V6B 6M3",
        "population": 631486,
        "score": null,
        "status": null,
        "emrit_owned": "true"
    }
        ];
        // initialize Leaflet 
        var map = L.map('map').setView({ lon: "79.0882", lat: "21.1458" }, 5);
        var prevZoom = map.getZoom();
        map.on('zoomend',function(e){
	// debugger;    
	var currZoom = map.getZoom();
    var diff = prevZoom - currZoom;
    if(diff > 0){
  	//    alert('zoomed out');
    } else if(diff < 0) {
        console.log('asfasfas', currZoom)
  	//    alert('zoomed in');
    } else {
  	//    alert('no change');
    }
    prevZoom = currZoom;
});

        // add the OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'
        }).addTo(map);

        // show a marker on the map
        L.control.scale().addTo(map);

        var hotspotcount = 1;
        // show a marker on the map
        for (var i = 0; i < locations.length; i++) {
            console.log('asfasfasf', locations[i]['emrit_owned'])
            if (locations[i]['emrit_owned'] == "false") {
                marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'red' })
                    .bindPopup(locations[i]['hotspot_name'])
                    .addTo(map).setRadius(4);
            }
            //  else if (locations[i][3] == "helium") {
            //     marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'green' })
            //         // .bindPopup(locations[i]['hotspot_name'])
            //         .addTo(map).setRadius(4);
            //     marker.myID = i;
            //     marker.on('click', markerOnClick2);
            // } 
            else {
                document.getElementById("hotspots").innerHTML = hotspotcount++
                // L.circle([locations[i]['lat'],locations[i]['long']], {radius: 100000}).addTo(map);
                marker = new L.Marker([locations[i]['lat'], locations[i]['long']], { icon: greenIcon })
                    // marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'green' })
                    .addTo(map);
                marker.myID = i;
                marker.on('click', markerOnClick);
            }
        }


        // L.marker({ lon: 77.646843, lat: 13.061296 }).addTo(map).on('click', markerOnClick);
        function markerOnClick(e) {
            console.log('asfasfasf', hotspotcount)
            document.getElementById("demo").innerHTML = locations[e.target.myID]['hotspot_name'];
            // L.circle([locations[e.target.myID][1],locations[e.target.myID][2]], {radius: 1000}).addTo(map);
            $('#mymodal').modal('show');
        }
        function markerOnClick2(e) {
            document.getElementById("demo2").innerHTML = locations[e.target.myID]['hotspot_name'];
            $('#mymodal2').modal('show');
        }

        function stickyheaddsadaer(obj) {
            if ($(obj).is(":checked")) {
                // alert("Yes checked"); //when checked
                $("#page-header-inner").addClass("sticky");
                for (var i = 0; i < locations.length; i++) {
                    if (locations[i]['emrit_owned'] == "false") {
                        marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'red' })
                            .bindPopup(locations[i]['hotspot_name'])
                            .addTo(map).setRadius(4);
                    } 
                    // else if (locations[i][3] == "helium") {
                    //     marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'green' })
                    //         // .bindPopup(locations[i]['hotspot_name'])
                    //         .addTo(map).setRadius(4);
                    //     marker.myID = i;
                    //     marker.on('click', markerOnClick2);
                    // } 
                    else {
                        // document.getElementById("hotspots").innerHTML = hotspotcount++
                        L.circle([locations[i]['lat'], locations[i]['long']], { radius: 80000, weight: 0, color: '#e49c9c' }).addTo(map);
                        marker = new L.Marker([locations[i]['lat'], locations[i]['long']], { icon: greenIcon })
                            // marker = new L.circleMarker([locations[i]['lat'], locations[i]['long']], { color: 'green' })
                            .addTo(map);
                        marker.myID = i;
                        marker.on('click', markerOnClick);
                    }
                }
            } else {
                // alert("Not checked"); //when not checked
            }

        }
    </script>
</body>

</html>